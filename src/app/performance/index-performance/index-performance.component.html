<div class="container-list">
    <div class="site-page-header-ghost-wrapper">
        <nz-page-header nzBackIcon nzTitle="DANH SÁCH CHỨNG TỪ ĐO CHỈ SỐ HOẠT ĐỘNG" class="site-page-header">
            <nz-page-header-extra>
                <nz-space [nzWrap]="true" class="gap-[5px]">
                    <nz-space>
                        <button nz-button nzType="default" (click)="searchData()" style="margin-right: 12px;">
                            <span nz-icon nzType="search"></span>
                            TÌM KIẾM
                        </button>
                        <button nz-button nzType="primary" (click)="exportData()">
                            <span nz-icon nzType="download"></span>
                            XUẤT FILE EXCEL
                        </button>
                    </nz-space>
                </nz-space>
            </nz-page-header-extra>
        </nz-page-header>
    </div>
    <div class="overflow-auto flex-grow">
        <nz-divider nzText="CHỌN THAM SỐ" nzOrientation="left"></nz-divider>
        <div nz-row [nzGutter]="16">

            <div nz-col class="gutter-row" [nzSpan]="2">
                <div class="inner-box">
                    Object Type
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="6">
                <div class="inner-box">
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn Object Type" style="width: 100%;"
                        [(ngModel)]="model.object_type">
                        <nz-option *ngFor="let item of lstSelectObjectType" [nzValue]="item.eqart"
                            [nzLabel]="item.eartx"></nz-option>
                    </nz-select>
                </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="2">
                <div class="inner-box">
                    Thiết bị
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="6">
                <div class="inner-box">
                    <input nz-input placeholder="Thiết bị" [(ngModel)]="model.equnr" />
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="2">
                <div class="inner-box">
                    Đơn vị quản lý
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="6">
                <div class="inner-box">
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn đơn vị quản lý" style="width: 100%;"
                        [(ngModel)]="model.ingpr">
                        <nz-option *ngFor="let item of lstSelectPlaner" [nzValue]="item.ingrp"
                            [nzLabel]="item.innam"></nz-option>
                    </nz-select>
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="2">
                <div class="inner-box">
                    Bộ phận bảo dưỡng
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="6">
                <div class="inner-box">
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn bộ phận bảo dưỡng" style="width: 100%;"
                        [(ngModel)]="model.arbpl">
                        <nz-option *ngFor="let item of lstSelectPhongBan" [nzValue]="item.depid"
                            [nzLabel]="item.depidTxt"></nz-option>
                    </nz-select>
                </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="2">
                <div class="inner-box">
                    Khu vực chức năng
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="6">
                <div class="inner-box">
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Chọn khu vực chức năng" style="width: 100%;"
                        [(ngModel)]="model.funcloc">
                        <nz-option *ngFor="let item of lstSelectFunclocList" [nzValue]="item.funcloc"
                            [nzLabel]="item.descript"></nz-option>
                    </nz-select>
                </div>
            </div>

            <div nz-col class="gutter-row" [nzSpan]="2">
                <div class="inner-box">
                    Ngày đo
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="3">
                <div class="inner-box">
                    <nz-date-picker [nzPlaceHolder]="'Từ ngày'" [nzFormat]="'dd/MM/yyyy'" style="width: 100%;"
                        [(ngModel)]="model.start_date"></nz-date-picker>
                </div>
            </div>
            <div nz-col class="gutter-row" [nzSpan]="3">
                <div class="inner-box">
                    <nz-date-picker [nzPlaceHolder]="'Đến ngày'" [nzFormat]="'dd/MM/yyyy'" style="width: 100%;"
                        [(ngModel)]="model.end_date"></nz-date-picker>
                </div>
            </div>




        </div>
        <nz-divider nzText="BẢNG DỮ LIỆU" nzOrientation="left"></nz-divider>
        <nz-table #datatable nzShowPagination nzShowSizeChanger
            (nzCurrentPageDataChange)="onCurrentPageDataChange($event)" [nzData]="dtable" [nzTotal]="dtable.length"
            [nzPageIndex]="1" [nzPageSize]="10">
            <thead>
                <tr>
                    <th>Số giao dịch</th>
                    <th>Mã chỉ số</th>
                    <th>Tên chỉ số</th>
                    <th>Mã thiết bị</th>
                    <th>Tên thiết bị</th>
                    <th>Ngày đo</th>
                    <th>Chỉ số đầu</th>
                    <th>Chỉ số cuối</th>
                    <th>Chênh lệch</th>
                    <th>Người đo</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @for (d of datatable.data; track d) {
                <tr>
                    <td>{{ d.sogd }}</td>
                    <td>{{ d.mabodem }}</td>
                    <td>{{ d.tenbodem }}</td>
                    <td>{{d.mathietbi }}</td>
                    <td>{{ d.tenthietbi }}</td>
                    <td>{{ d.ngaythuchien }}</td>
                    <td>{{ d.chisodau }}</td>
                    <td>{{d.chisocuoi}}</td>
                    <td>{{ d.chenhlech }}</td>
                    <td>{{ d.nguoithuchien }}</td>
                    <td>
                        <button nz-button nzType="primary" nzDanger>Huỷ</button>
                    </td>
                </tr>
                }
            </tbody>
        </nz-table>
    </div>
</div>